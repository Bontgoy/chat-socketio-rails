<h1 class="admin-message">{{page}}</h1>
<hr>

<div class="row">
  <div class="col-lg-4"> 
    <chat-room [messageVersionInput]="true" [messageSelectedChatRoomId]="chatRoomId" 
               (getChatRoomId)="showMessage($event)"></chat-room>
  </div>

  <div class="col-lg-8"> 
    <div *ngIf="response === -1" class="alert alert-danger">
      <strong>Error!</strong> Something went wrong. Please try again.
    </div>
    <h3>Messages</h3>
    <div class="panel-body">
      <ul *ngFor="let message of messages" class="chat messages">
        <li *ngIf="message.user_id != user.id" (click)="gotoDetail(message)" 
            class="left clearfix"><span class="chat-img pull-left">
          <img src="app/components/admin/message/resources/img/you.png" alt="User Avatar" class="img-circle" />
        </span>
          <div class="chat-body clearfix">
            <div class="header">
              <strong class="primary-font">Jack Sparrow</strong> <small class="pull-right text-muted">
                <span class="glyphicon glyphicon-time"></span>{{message.created_at | date:"medium"}}</small>
            </div>
            <p>{{message.body}}</p>
          </div>
        </li>
        <li *ngIf="message.user_id == user.id" (click)="gotoDetail(message)" 
            class="right clearfix"><span class="chat-img pull-right">
          <img src="app/components/admin/message/resources/img/me.png" alt="User Avatar" class="img-circle" />
        </span>
          <div class="chat-body clearfix">
            <div class="header">
              <small class=" text-muted"><span class="glyphicon glyphicon-time"></span>{{message.created_at | date:"medium"}}</small>
              <strong class="pull-right primary-font">{{user.name}}</strong>
            </div>
            <p>{{message.body}}</p>
          </div>
        </li>
      </ul>
      <div *ngIf="messages == null" class="chat-empty glyphicon-bigger messages">
        <span class="glyphicon glyphicon-arrow-left"></span>
        <span>Please select a chat room</span>
      </div>
    </div>
    <div class="panel-footer">
      <div class="input-group">
        <input id="chat" type="text" class="form-control input-sm" 
                placeholder="Type your message here..." />
        <span class="input-group-btn">
            <button class="btn btn-primary btn-sm" id="add-message">
                Send</button>
        </span>
      </div>
    </div>
  </div>
</div>
